# Perf Fiscal 0.4.0

Released: 2025-11-12

## Highlights

- **Lazy module & usage indices** - the cross-file analyzer now indexes source files on demand, dramatically lowering the cold-start cost for the first lint run.
- **Importer-aware usage tracking** - JSX prop and call-site discovery follows actual importers so rules only scan the files that matter.
- **Analyzer stats surfaced in debug traces** - `debugExplain: true` now appends `analyzerStats` with per-index file counts to help you understand how much work the analyzer performed.

## Upgrading

1. Update the plugin version to `^0.4.0` in your ESLint configuration.
2. Re-run `npm install` / `pnpm install` / `yarn install` to pick up the release.
3. (Optional) Enable `debugExplain: true` on rules such as `perf-fiscal/no-unhandled-promises` when debugging - the explain trace now includes analyzer stats.

No configuration changes are required; all features ship disabled by default unless you already rely on `debugExplain`.

## Opt-out & Noise Control

- Turn off the new explain traces by leaving `debugExplain` at its default (`false`).
- Dial rule strictness as needed:
  ```json
  {
    "perf-fiscal/no-unhandled-promises": ["warn", { "strictness": "relaxed", "debugExplain": false }]
  }
  ```
- Report any unexpected diagnostics via the new [False Positive template](../../.github/ISSUE_TEMPLATE/false-positive.md).

## Internal Changes

- Added `CrossFileAnalyzer.getStats()` and exposed the counts via module/usage indices.
- Shared analyzer infrastructure now caches per-symbol importer lookups and safely reports stats for tooling integrations.
- Expanded unit coverage in `tests/utils/cross-file-analyzer.test.ts` to assert lazy indexing behaviour.
